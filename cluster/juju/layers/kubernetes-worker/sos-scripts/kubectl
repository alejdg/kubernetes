#!/bin/sh
set -ux

sudo -iu ubuntu kubectl cluster-info > $SOS_SCRIPT_DIR/cluster-info
sudo -iu ubuntu kubectl cluster-info dump > $SOS_SCRIPT_DIR/cluster-info-dump
for obj in pods svc ingress secrets pv pvc rc; do
  sudo -iu ubuntu kubectl describe $obj --all-namespaces > $SOS_SCRIPT_DIR/describe-$obj
done
for obj in nodes; do
  sudo -iu ubuntu kubectl describe $obj > $SOS_SCRIPT_DIR/describe-$obj
done
